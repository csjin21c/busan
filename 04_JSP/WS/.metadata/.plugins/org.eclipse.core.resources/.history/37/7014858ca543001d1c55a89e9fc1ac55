<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@page import="java.io.PrintWriter" %>
<%@page import="java.util.ArrayList" %>
<%@page import="pkgJDBC.BbsDAO" %>
<%@page import="pkgJDBC.BoardField" %>
<%
int pageNum;
if(request.getAttribute("page")!=null) pageNum=(int)request.getAttribute("page");
else pageNum=1;

int groupNum=1;
%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<table>
	<tr>
		<td>No.</td>
		<td>파트<td>
	</tr>
	<%
	Connection conn;
	ResultSet rs;
	Map<String, Integer> mapOutput = new HashMap<>();
	try {
		Connection conn = BbsJDBC.bbsConnect();
		String SQL="SELECT IFNULL(MAX(FIDX)+1,1) "
				+ " FROM TBOARD";
		PreparedStatement pstmt = conn.prepareStatement(SQL);
		System.out.println("Statement객체 생성 성공");
		
		rs = pstmt.executeQuery();
		if (rs.next()) {
			mapOutput.put("idx", rs.getInt("aidx"));//String로 데이터 변경하여 처리
		}
		rs.close();//result set 객체를 닫아줌.
		return mapOutput;//반환 받은 FIDX값을 반환
	}catch(Exception e) {
		out.print("asdf");
	}
	
	%>
</table>
</body>
</html>